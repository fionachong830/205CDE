{% extends "/bootstrap/baseCustomer.html" %}
{% block title %}Shopping Cart{% endblock %}
{% block content %}
<h2>Shopping Cart</h2><br>
<p id="message"></p>
{% if status != 'Empty' %}
<table>
    <thead>
      <tr>
        <th>Product</th>
        <th>Days</th>
        <th>Price per day</th>
        <th>Subtotal</th>
        <th>Edit</th>
      </tr>
    </thead>
    <tbody>
      {% for items in list %}
        <tr><td> {{items.name}} </td>
        <td> {{items.count}} </td>
        <td>$ {{items.price}} </td>
        <td>$ {{items.subtotal()}} </td>
        <td> <p><label class="btn" for="{{items.name}}">Edit</label></p> </td></tr>
      {% endfor %}
    </tbody>
</table>
<br>
<p id="total">Total: ${{total}}<br> </p>
{% for info in user %}
<form action="/customer/{{info.userID}}/buy" method="post">
{% endfor %}
<input type="submit" value="Confirm" />
</form>
<button onclick="window.print()">Print this page</button>
{% endif %} 

{% if status == 'Empty' %}
Nothing in Cart
{% endif %} 
{% for items in list %}
    <input class="modal-state" id="{{items.name}}" type="checkbox" />
    <div class="modal">
        <label class="modal__bg" for="{{items.name}}"></label>
        <div class="modal__inner">
            <label class="modal__close" for="{{items.name}}"></label>
            <h2>{{items.name}}</h2>
            <div class="fill-in">
              {% for info in user %}
              <form action="/customer/{{info.userID}}/shoppingCart" method="post">
              {% endfor %}
                    <input type="hidden" name="prodID" value={{items.id}}>
                    <label for="day">Days</label>
                    <input type="number" name="days" min="1" value={{items.count}} required /><br>
                    <input type="submit" value="Save" />
                </form>
            </div>
        </div>
    </div>    
{% endfor %}  
{% endblock %}

{% block script %}
<script>
  function update(){
    let route = Number(document.getElementById("RouteDays").value);
    document.getElementById("RouteSubtotal").innerHTML="$"+route*1;
  }
</script>
{% endblock %} 
